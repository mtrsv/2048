!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n="#root",i="direction-up",o="direction-down",l="direction-left",s="direction-right";new class{constructor(){this.field=[[1024,128,64,0],[2,0,0,2],[2,2,2,2],[8,4,2,2]],this.element=document.querySelector(n),document.addEventListener("keydown",this.onKeyDown.bind(this)),this.render(this.getField()),window.t=this.shrinkRow}onKeyDown(e){switch(e.key){case"ArrowLeft":this.moveField(l);break;case"ArrowRight":this.moveField(s);break;case"ArrowUp":this.moveField(i);break;case"ArrowDown":this.moveField(o)}}moveField(e){console.log(e),this.field=this.collapseField(this.getField()),this.render(this.getField())}collapseField(e){return e.map(this.collapseRow.bind(this))}collapseRow(e){let t=[...e];return(t=this.shrinkRow(t)).forEach((e,r)=>{e===t[r+1]&&(t[r]=2*e,t[r+1]=0)}),console.log(),t}shrinkRow(e){let t=[...e];t.filter(e=>0!==e);let r=e.length-t.length;for(;r>0;)t.push(0),r--;return t}render(e){let t="";e.forEach(e=>{t+='<div class="row">',e.forEach(e=>{t+=`<div class="cell"><div class="inner">${e||""}</div></div>`}),t+="</div>"}),this.element.innerHTML=t}getField(){return this.field}}}]);